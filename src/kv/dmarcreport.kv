# File name: dmarcreport.kv
#: kivy 1.9.1

<Page@GridLayout>:
    cols: 1
    rows: 3

<GreyLabel@Label>:
    color: 211 / 255.0, 211 / 255.0, 211 / 255.0, .87

<Header@GreyLabel>:
    size_hint: .5, .2
    font_size: '32sp'
    bold: True

<Body@AnchorLayout>:
    anchor_x: 'center'
    anchor_y: 'center'
    size_hint: 1, .75

<Footer@GreyLabel>:
    size: self.size
    pos: self.pos
    halign: 'right'
    size_hint: 1, .05

<DataLabel@GreyLabel>:
    text_size: self.size

<LabelL@DataLabel>:
    halign: 'left'

<LabelR@DataLabel>:
    halign: 'right'

<DmarcReportNui>:
    fullscreen: True

    Accordion:
        orientation: 'horizontal'
        anim_duration: 2

        AccordionItem:
            title: 'Load File'.title()
            Page:
                Header:
                    text: 'Load File'.title()
                Body:
                    BoxLayout:
                        orientation: 'vertical'

                        FileChooser:
                            id: _filechooser
                            dirselect: False
                            multiselect: False
                            show_hidden: False
                            path: '~/'
                            filters: ['*.[Zz][Ii][Pp]', '*.[Xx][Mm][Ll]']
                            FileChooserIconLayout

                        Button:
                            height: '48dp'
                            size_hint_y: None
                            text: 'Load'.title()
                            on_release: _filefooter.text = 'File {0} loaded…'.format(_filechooser.selection[0]) if root.load(_filechooser.path, _filechooser.selection) else 'Error; File could not be loaded…'

                Footer:
                    id: _filefooter
                    text: 'Choose file to load…'

        AccordionItem:
            id: _mainitem
            title: 'Dmarc Report'.title()
            Page:
                Header:
                    text: 'Dmarc Report'.title()
                Body:
                    BoxLayout:
                        orientation: 'horizontal'
                        spacing: '35sp'

                        # Policy
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: '[b]Policy Published[/b]'
                                size_hint: 1, .1
                                font_size: '20sp'
                                markup: True

                            GridLayout:
                                cols: 2
                                rows: 6
                                size_hint: 1, .9

                                LabelL
                                    text: 'Domain'
                                LabelR:
                                    text: root.pol_domain
                                LabelL:
                                    text: 'Adkim'
                                LabelR:
                                    text: root.pol_adkim
                                LabelL:
                                    text: 'Aspf'
                                LabelR:
                                    text: root.pol_aspf
                                LabelL:
                                    text: 'Pct'
                                LabelR:
                                    text: root.pol_pct
                                LabelL:
                                    text: 'Sp'
                                LabelR:
                                    text: root.pol_sp
                                LabelL:
                                    text: 'P'
                                LabelR:
                                    text: root.pol_p

                        # Report
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: '[b]Report Metadata[/b]'
                                size_hint: 1, .1
                                font_size: '20sp'
                                markup: True

                            GridLayout:
                                cols: 2
                                rows: 7
                                size_hint: 1, .9

                                LabelL:
                                    text: 'Org Name'
                                LabelR:
                                    text: root.rep_orgname
                                LabelL:
                                    text: 'Email'
                                LabelR:
                                    text: root.rep_email
                                LabelL:
                                    text: 'Report ID'
                                Label
                                Label
                                LabelR:
                                    text: root.rep_reportid
                                LabelL:
                                    text: 'Date Range'
                                Label
                                LabelL:
                                    text: 'Begin'
                                LabelR:
                                    text: root.rep_begin
                                LabelL:
                                    text: 'End'
                                LabelR:
                                    text: root.rep_end

                        # Record
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: '[b]Record[/b]'
                                size_hint: 1, .1
                                font_size: '20sp'
                                markup: True

                            GridLayout:
                                cols: 2
                                rows: 16
                                size_hint: 1, .9

                                LabelL:
                                    text: 'Row'
                                Label
                                LabelL:
                                    text: 'Source IP'
                                LabelR:
                                    text: root.rec_sourceip
                                LabelL:
                                    text: 'Count'
                                LabelR:
                                    text: root.rec_count
                                LabelL:
                                    text: 'Policy Evaluated'
                                Label
                                LabelL:
                                    text: 'Disposition'
                                LabelR:
                                    text: root.rec_disposition
                                LabelL:
                                    text: 'DKIM'
                                LabelR:
                                    text: root.rec_ddkim
                                LabelL:
                                    text: 'SPF'
                                LabelR:
                                    text: root.rec_dspf
                                LabelL:
                                    text: 'Identifiers'
                                Label
                                LabelL:
                                    text: 'Header From'
                                LabelR:
                                    text: root.rec_headerfrom
                                LabelL:
                                    text: 'Auth Results'
                                Label
                                LabelL:
                                    text: 'SPF'
                                Label
                                LabelL:
                                    text: 'Domain'
                                LabelR:
                                    text: root.rec_aspfdomain
                                LabelL:
                                    text: 'Result'
                                LabelR:
                                    text: root.rec_aspfresult
                                LabelL:
                                    text: 'DKIM'
                                Label
                                LabelL:
                                    text: 'Domain'
                                LabelR:
                                    text: root.rec_adkimdomain
                                LabelL:
                                    text: 'Result'
                                LabelR:
                                    text: root.rec_adkimresult

                Footer:
                    text: 'Viewing currently loaded file…'
