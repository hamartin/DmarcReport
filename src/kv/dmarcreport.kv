# File name: dmarcreport.kv
#: kivy 1.9.1

<Page@GridLayout>:
    cols: 1
    rows: 3

<GreyLabel@Label>:
    color: 211 / 255.0, 211 / 255.0, 211 / 255.0, .87

<Header@GreyLabel>:
    size_hint: .5, .2
    font_size: '32sp'
    bold: True

<Body@AnchorLayout>:
    anchor_x: 'center'
    anchor_y: 'center'
    size_hint: 1, .75

<Footer@GreyLabel>:
    size: self.size
    pos: self.pos
    halign: 'right'
    size_hint: 1, .05

<DmarcReportNui>:
    fullscreen: True

    Accordion:
        orientation: 'horizontal'
        anim_duration: 2

        AccordionItem:
            title: 'Load File'.title()
            Page:
                Header:
                    text: 'Load File'.title()
                Body:
                    BoxLayout:
                        orientation: 'vertical'

                        FileChooser:
                            id: _filechooser
                            dirselect: False
                            multiselect: False
                            show_hidden: False
                            path: '~/'
                            filters: ['*.[Zz][Ii][Pp]', '*.[Xx][Mm][Ll]']
                            FileChooserIconLayout

                        Button:
                            height: '48dp'
                            size_hint_y: None
                            text: 'Load'.title()
                            on_release: _filefooter.text = 'File {0} loaded…'.format(_filechooser.selection[0]) if root.load(_filechooser.path, _filechooser.selection) else 'Error; File could not be loaded…'

                Footer:
                    id: _filefooter
                    text: 'Choose file to load…'

        AccordionItem:
            title: 'Dmarc Report'.title()
            Page:
                Header:
                    text: 'Dmarc Report'.title()
                Body:
                    BoxLayout:
                        orientation: 'horizontal'
                        spacing: '35sp'

                        # Policy
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: 'Policy Published'

                            GridLayout:
                                cols: 2
                                rows: 6

                                Label:
                                    text: 'Domain'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.pol_domain
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Adkim'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.pol_adkim
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Aspf'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.pol_aspf
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Pct'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.pol_pct
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Sp'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.pol_sp
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'P'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.pol_p
                                    text_size: self.size
                                    halign: 'right'

                        # Report
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: 'Report Metadata'

                            GridLayout:
                                cols: 2
                                rows: 7

                                Label:
                                    text: 'Org Name'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rep_orgname
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Email'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rep_email
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Report ID'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: ''
                                Label:
                                    text: ''
                                Label:
                                    text: root.rep_reportid
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Date Range'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: ''
                                Label:
                                    text: 'Begin'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rep_begin
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'End'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rep_end
                                    text_size: self.size
                                    halign: 'right'

                        # Record
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: 'Record'

                            GridLayout:
                                cols: 2
                                rows: 16

                                Label:
                                    text: 'Row'
                                    text_size: self.size
                                    halign: 'left'
                                Label
                                Label:
                                    text: 'Source IP'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_sourceip
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Count'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_count
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Policy Evaluated'
                                    text_size: self.size
                                    halign: 'left'
                                Label
                                Label:
                                    text: 'Disposition'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_disposition
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'DKIM'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_ddkim
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'SPF'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_dspf
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Identifiers'
                                    text_size: self.size
                                    halign: 'left'
                                Label
                                Label:
                                    text: 'Header From'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_headerfrom
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Auth Results'
                                    text_size: self.size
                                    halign: 'left'
                                Label
                                Label:
                                    text: 'SPF'
                                    text_size: self.size
                                    halign: 'left'
                                Label
                                Label:
                                    text: 'Domain'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_aspfdomain
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Result'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_aspfresult
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'DKIM'
                                    text_size: self.size
                                    halign: 'left'
                                Label
                                Label:
                                    text: 'Domain'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_adkimdomain
                                    text_size: self.size
                                    halign: 'right'
                                Label:
                                    text: 'Result'
                                    text_size: self.size
                                    halign: 'left'
                                Label:
                                    text: root.rec_adkimresult
                                    text_size: self.size
                                    halign: 'right'

                Footer:
                    text: 'Viewing currently loaded file…'
